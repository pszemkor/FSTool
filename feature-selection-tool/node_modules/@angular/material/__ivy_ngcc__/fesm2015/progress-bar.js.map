{"version":3,"file":"progress-bar.js","sources":["../../../../../../src/material/progress-bar/progress-bar.ts","../../../../../../src/material/progress-bar/progress-bar-module.ts","../../../../../../src/material/progress-bar/index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {coerceNumberProperty, NumberInput} from '@angular/cdk/coercion';\nimport {DOCUMENT} from '@angular/common';\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  inject,\n  InjectionToken,\n  Input,\n  NgZone,\n  OnDestroy,\n  Optional,\n  Output,\n  ViewChild,\n  ViewEncapsulation,\n} from '@angular/core';\nimport {CanColor, CanColorCtor, mixinColor} from '@angular/material/core';\nimport {ANIMATION_MODULE_TYPE} from '@angular/platform-browser/animations';\nimport {fromEvent, Observable, Subscription} from 'rxjs';\nimport {filter} from 'rxjs/operators';\n\n\n// TODO(josephperrott): Benchpress tests.\n// TODO(josephperrott): Add ARIA attributes for progress bar \"for\".\n\n/** Last animation end data. */\nexport interface ProgressAnimationEnd {\n  value: number;\n}\n\n// Boilerplate for applying mixins to MatProgressBar.\n/** @docs-private */\nclass MatProgressBarBase {\n  constructor(public _elementRef: ElementRef) { }\n}\n\nconst _MatProgressBarMixinBase: CanColorCtor & typeof MatProgressBarBase =\n    mixinColor(MatProgressBarBase, 'primary');\n\n/**\n * Injection token used to provide the current location to `MatProgressBar`.\n * Used to handle server-side rendering and to stub out during unit tests.\n * @docs-private\n */\nexport const MAT_PROGRESS_BAR_LOCATION = new InjectionToken<MatProgressBarLocation>(\n  'mat-progress-bar-location',\n  {providedIn: 'root', factory: MAT_PROGRESS_BAR_LOCATION_FACTORY}\n);\n\n/**\n * Stubbed out location for `MatProgressBar`.\n * @docs-private\n */\nexport interface MatProgressBarLocation {\n  getPathname: () => string;\n}\n\n/** @docs-private */\nexport function MAT_PROGRESS_BAR_LOCATION_FACTORY(): MatProgressBarLocation {\n  const _document = inject(DOCUMENT);\n  const _location = _document ? _document.location : null;\n\n  return {\n    // Note that this needs to be a function, rather than a property, because Angular\n    // will only resolve it once, but we want the current path on each call.\n    getPathname: () => _location ? (_location.pathname + _location.search) : ''\n  };\n}\n\nexport type ProgressBarMode = 'determinate' | 'indeterminate' | 'buffer' | 'query';\n\n/** Counter used to generate unique IDs for progress bars. */\nlet progressbarId = 0;\n\n/**\n * `<mat-progress-bar>` component.\n */\n@Component({\n  selector: 'mat-progress-bar',\n  exportAs: 'matProgressBar',\n  host: {\n    'role': 'progressbar',\n    'aria-valuemin': '0',\n    'aria-valuemax': '100',\n    '[attr.aria-valuenow]': '(mode === \"indeterminate\" || mode === \"query\") ? null : value',\n    '[attr.mode]': 'mode',\n    'class': 'mat-progress-bar',\n    '[class._mat-animation-noopable]': '_isNoopAnimation',\n  },\n  inputs: ['color'],\n  templateUrl: 'progress-bar.html',\n  styleUrls: ['progress-bar.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class MatProgressBar extends _MatProgressBarMixinBase implements CanColor,\n                                                      AfterViewInit, OnDestroy {\n  constructor(public _elementRef: ElementRef, private _ngZone: NgZone,\n              @Optional() @Inject(ANIMATION_MODULE_TYPE) public _animationMode?: string,\n              /**\n               * @deprecated `location` parameter to be made required.\n               * @breaking-change 8.0.0\n               */\n              @Optional() @Inject(MAT_PROGRESS_BAR_LOCATION) location?: MatProgressBarLocation) {\n    super(_elementRef);\n\n    // We need to prefix the SVG reference with the current path, otherwise they won't work\n    // in Safari if the page has a `<base>` tag. Note that we need quotes inside the `url()`,\n\n    // because named route URLs can contain parentheses (see #12338). Also we don't use since\n    // we can't tell the difference between whether\n    // the consumer is using the hash location strategy or not, because `Location` normalizes\n    // both `/#/foo/bar` and `/foo/bar` to the same thing.\n    const path = location ? location.getPathname().split('#')[0] : '';\n    this._rectangleFillValue = `url('${path}#${this.progressbarId}')`;\n    this._isNoopAnimation = _animationMode === 'NoopAnimations';\n  }\n\n  /** Flag that indicates whether NoopAnimations mode is set to true. */\n  _isNoopAnimation = false;\n\n  /** Value of the progress bar. Defaults to zero. Mirrored to aria-valuenow. */\n  @Input()\n  get value(): number { return this._value; }\n  set value(v: number) {\n    this._value = clamp(coerceNumberProperty(v) || 0);\n  }\n  private _value: number = 0;\n\n  /** Buffer value of the progress bar. Defaults to zero. */\n  @Input()\n  get bufferValue(): number { return this._bufferValue; }\n  set bufferValue(v: number) { this._bufferValue = clamp(v || 0); }\n  private _bufferValue: number = 0;\n\n  @ViewChild('primaryValueBar') _primaryValueBar: ElementRef;\n\n  /**\n   * Event emitted when animation of the primary progress bar completes. This event will not\n   * be emitted when animations are disabled, nor will it be emitted for modes with continuous\n   * animations (indeterminate and query).\n   */\n  @Output() animationEnd = new EventEmitter<ProgressAnimationEnd>();\n\n  /** Reference to animation end subscription to be unsubscribed on destroy. */\n  private _animationEndSubscription: Subscription = Subscription.EMPTY;\n\n  /**\n   * Mode of the progress bar.\n   *\n   * Input must be one of these values: determinate, indeterminate, buffer, query, defaults to\n   * 'determinate'.\n   * Mirrored to mode attribute.\n   */\n  @Input() mode: ProgressBarMode = 'determinate';\n\n  /** ID of the progress bar. */\n  progressbarId = `mat-progress-bar-${progressbarId++}`;\n\n  /** Attribute to be used for the `fill` attribute on the internal `rect` element. */\n  _rectangleFillValue: string;\n\n  /** Gets the current transform value for the progress bar's primary indicator. */\n  _primaryTransform() {\n    const scale = this.value / 100;\n    return {transform: `scaleX(${scale})`};\n  }\n\n  /**\n   * Gets the current transform value for the progress bar's buffer indicator. Only used if the\n   * progress mode is set to buffer, otherwise returns an undefined, causing no transformation.\n   */\n  _bufferTransform() {\n    if (this.mode === 'buffer') {\n      const scale = this.bufferValue / 100;\n      return {transform: `scaleX(${scale})`};\n    }\n    return null;\n  }\n\n  ngAfterViewInit() {\n    // Run outside angular so change detection didn't get triggered on every transition end\n    // instead only on the animation that we care about (primary value bar's transitionend)\n    this._ngZone.runOutsideAngular((() => {\n      const element = this._primaryValueBar.nativeElement;\n\n      this._animationEndSubscription =\n        (fromEvent(element, 'transitionend') as Observable<TransitionEvent>)\n          .pipe(filter(((e: TransitionEvent) => e.target === element)))\n          .subscribe(() => {\n            if (this.mode === 'determinate' || this.mode === 'buffer') {\n              this._ngZone.run(() => this.animationEnd.next({value: this.value}));\n            }\n          });\n    }));\n  }\n\n  ngOnDestroy() {\n    this._animationEndSubscription.unsubscribe();\n  }\n\n  static ngAcceptInputType_value: NumberInput;\n}\n\n/** Clamps a value to be between two numbers, by default 0 and 100. */\nfunction clamp(v: number, min = 0, max = 100) {\n  return Math.max(min, Math.min(max, v));\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {MatCommonModule} from '@angular/material/core';\nimport {MatProgressBar} from './progress-bar';\n\n\n@NgModule({\n  imports: [CommonModule, MatCommonModule],\n  exports: [MatProgressBar, MatCommonModule],\n  declarations: [MatProgressBar],\n})\nexport class MatProgressBarModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}